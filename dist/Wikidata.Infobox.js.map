{"version":3,"file":null,"sources":["../src/HandleBarsWrapper.js","../src/InfoBox.js"],"sourcesContent":["\"use strict\"\nimport * as promisedHandlebars from '../node_modules/promised-handlebars/index.js';\n//import P18 from './templates/helpers/P18';\n/*\nDynamic Loading\nmore her: http://exploringjs.com/es6/ch_modules.html\nconst moduleSpecifier = 'module_' + Math.random();\nSystem.import(moduleSpecifier)\n.then(the_module => {\n    // Use the_module\n})\n*/\n\n\n\nclass HandleBarsWrapper {\n  constructor() {\n      this.postProcessFunctions = [];\n      this.modules = [];\n\n      //      var promisedHandlebars = require('promised-handlebars')\n      //      var Q = require('q')\n      var Handlebars = promisedHandlebars(Handlebars)\n\n      var me = this;\n\n      function debug(context, options) {\n        console.log(\n          'This : ', this);\n        console.log(\n          'Context : ', context\n          //      'Variables referenced in this template: ',                     context.vars,\n          //      'Partials/templates that this file directly depends on: ',     context.deps,\n          //      'Helpers that this template directly depends on: ',            context.helpers,\n          //      'The metadata object at the top of the file (if it exists): ', context.meta\n        );\n      }\n      Handlebars.registerHelper('debug', debug);\n\n      function dynamictemplate(key, template, context, opts) {\n        console.log(key);\n        try {\n          //          if (key == 'P18') {\n          if ((me.modules[key] !== false) && (typeof me.modules[key] == 'undefined')) {\n            console.log('hallo');\n            //  japie.render();\n            try {\n              System.import('../src/templates/helpers/' + key + '.js')\n                .then(the_module => {\n                  var property = the_module.default.P18();\n                  property.render();\n                  console.error(\"Bingo, Loaded Object \" + key);\n                  me.modules[key] = property;\n                })\n            } catch (e) {\n              console.error(\"did not load \" + key, e);\n              me.modules[key] = false;\n            }\n          }\n          //          dsfsd\n          if (typeof me.modules[key] !== 'undefined') {\n            console.log(\"Adding postprocess for \" + key);\n            me.postProcessFunctions.push(property.postProcess);\n\n          }\n          //      }\n\n          //          var property = new self[key].Factory();\n        } catch (e) {\n          console.error(\"there is no object of type \" + key);\n        }\n        //      me.postProcessFunctions.push(property.postProcess)\n        var f = Handlebars.partials[key];\n        if (!f) {\n          template = template.replace(/\\//g, '_');\n          var f = Handlebars.partials[template];\n          if (!f) {\n            return \"defaultText\";\n          }\n        } else {\n          //  require(key)\n        }\n        return new Handlebars.SafeString(f(context));\n      }\n\n      Handlebars.registerHelper('dynamictemplate', dynamictemplate);\n      // This is so we can compile all partials + templates into 1 file\n      Handlebars.partials = Handlebars.templates;\n\n    }\n    //  get postProcessFunctions {\n    //    return this.postProcessFunctions\n    //  }\n  addPartial(name) {\n\n  }\n  postProcess(element) {\n    var element = $(element);\n    this.postProcessFunctions.forEach(function(functionname) {\n      functionname();\n    });\n  }\n  getTemplate(name) {\n    if (Handlebars.templates === undefined || Handlebars.templates[name] === undefined) {\n      $.ajax({\n        url: 'templates/' + name + '.hbs',\n        success: function(data) {\n          if (Handlebars.templates === undefined) {\n            Handlebars.templates = {};\n          }\n          Handlebars.templates[name] = Handlebars.compile(data);\n        },\n        async: false\n      });\n    }\n    return Handlebars.templates[name];\n  };\n}\n\nexport default {\n  HandleBarsWrapper\n};\n","\"use strict\"\nimport HandleBarsWrapper from './HandleBarsWrapper';\n\nclass InfoBox {\n\n  constructor() {\n    var me = this;\n\n    var bar = new HandleBarsWrapper.HandleBarsWrapper();\n    this.handlebars = bar;\n  }\n\n  getentities(Q, languages) {\n    var simplifiedClaims, labels, entity;\n\n    //  var url = wdk.getEntities(ids, languages, properties, format)\n    var url = wdk.getEntities(Q, languages);\n    var me = this;\n    $.ajax({\n        dataType: \"jsonp\",\n        url: url,\n      })\n      .done(function(data) {\n        entity = data.entities[Q];\n        var entities = wdk.parse.wd.entities;\n        //  var entities = wdk.parse.wd.entities(data);\n        simplifiedClaims = wdk.simplifyClaims(entity.claims);\n        //  alert(entities);\n        var properties = Object.keys(simplifiedClaims);\n        var url2 = wdk.getEntities(properties, languages);\n        //alert(\"done\");\n        //request(url2 ....\n        $.ajax({\n            dataType: \"jsonp\",\n            url: url2,\n          })\n          .done(function(labels) {\n\n            //            _.each(labels.entities, function(label, key, labels) {\n            //              entity.claims[key].label = label;\n            //            });\n\n            $('#infobox').append(\"<h2>\" + entity.labels[Object.keys(entity.labels)[0]].value + \"</h2>\")\n            $('#infobox').append(\"<i>\" + entity.descriptions[Object.keys(entity.descriptions)[0]].value +\n              \"</i>\")\n\n            var object = {\n              entity: entity,\n              labels: labels,\n              languages: languages\n            }\n            var infobox = me.handlebars.getTemplate('infobox');\n            infobox(object).done(function(html) {\n              $('#infobox').html(html);\n              me.handlebars.postProcess('#infobox');\n            });\n          })\n      })\n\n    .fail(function(err) {\n      alert(\"error\");\n    });\n  }\n}\n\nexport {\n  InfoBox\n};\n"],"names":["HandleBarsWrapper"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}